{% extends 'vocabulary/base.html' %}

{% block title %}–í—Å–µ —Å–ª–æ–≤–∞ - –°–ª–æ–≤–∞—Ä—å{% endblock %}

{% block content %}
<h1>–°–ª–æ–≤–∞—Ä—å –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤</h1>

<!-- –§–æ—Ä–º–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ -->
<div class="filter-form">
    <form method="get" action="{% url 'vocabulary:word_list' %}">
        <div class="filter-row">
            <div class="filter-group">
                <label for="language_from">–ò—Å—Ö–æ–¥–Ω—ã–π —è–∑—ã–∫:</label>
                <select name="language_from" id="language_from">
                    <option value="">–í—Å–µ —è–∑—ã–∫–∏</option>
                    {% for language in languages %}
                        <option value="{{ language.id }}"
                                {% if language_from_filter == language.id|stringformat:"i" %}selected{% endif %}>
                            {{ language.name }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="filter-group">
                <label for="language_to">–Ø–∑—ã–∫ –ø–µ—Ä–µ–≤–æ–¥–∞:</label>
                <select name="language_to" id="language_to">
                    <option value="">–í—Å–µ —è–∑—ã–∫–∏</option>
                    {% for language in languages %}
                        <option value="{{ language.id }}"
                                {% if language_to_filter == language.id|stringformat:"i" %}selected{% endif %}>
                            {{ language.name }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="filter-actions">
                <button type="submit" class="btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                <a href="{% url 'vocabulary:word_list' %}" class="btn btn-secondary">–°–±—Ä–æ—Å–∏—Ç—å</a>
            </div>
        </div>
    </form>
</div>

{% if words %}
    <div class="words-list">
        {% for word in words %}
            <div class="word-card">
                <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <div style="flex: 1;">
                        <a href="{% url 'vocabulary:word_detail' word.pk %}" class="word-link">
                            <div class="word-original">{{ word.original_word }}</div>
                            <div class="word-translation">{{ word.translation }}</div>
                            <div class="word-languages">
                                {{ word.language_from }} ‚Üí {{ word.language_to }}
                            </div>
                        </a>
                    </div>

                    {% if user.is_authenticated %}
                        <button class="favorite-btn {% if word.id in favorite_words_ids %}active{% endif %}"
                                data-word-id="{{ word.id }}">
                            {% if word.id in favorite_words_ids %}
                                ‚ù§Ô∏è
                            {% else %}
                                ü§ç
                            {% endif %}
                        </button>
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="no-words">
        <h2>–°–ª–æ–≤–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h2>
        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</p>
        <a href="{% url 'vocabulary:word_list' %}" class="btn" style="margin-top: 1rem;">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å–ª–æ–≤–∞</a>
    </div>
{% endif %}

<a href="{% url 'vocabulary:random_word' %}" class="btn random-btn">–°–ª—É—á–∞–π–Ω–æ–µ —Å–ª–æ–≤–æ</a>
{% endblock %}