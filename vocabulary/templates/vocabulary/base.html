<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–ò–∑—É—á–µ–Ω–∏–µ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤{% endblock %}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: #ffffff;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border-radius: 0;
            margin-bottom: 30px;
            border: 1px solid #e0e0e0;
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2c3e50;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a, .nav-links button {
            text-decoration: none;
            color: #34495e;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 0;
            transition: all 0.3s ease;
            border: 1px solid transparent;
            background: none;
            cursor: pointer;
            font-size: 1rem;
            font-family: inherit;
        }

        .nav-links a:hover, .nav-links button:hover {
            background: #3498db;
            color: white;
            border-color: #2980b9;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            color: #2c3e50;
            font-weight: 500;
        }

        .user-welcome {
            background: #ecf0f1;
            padding: 0.5rem 1rem;
            border-left: 3px solid #3498db;
        }

        .main-content {
            background: #ffffff;
            border-radius: 0;
            padding: 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            border: 1px solid #e0e0e0;
        }

        .word-card {
            background: white;
            border-radius: 0;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            border: 1px solid #e0e0e0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .word-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);
            border-color: #bdc3c7;
        }

        .word-link {
            text-decoration: none;
            color: inherit;
            display: block;
        }

        .word-original {
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .word-translation {
            font-size: 1.5rem;
            color: #34495e;
            margin-bottom: 1rem;
        }

        .word-languages {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            padding: 0.5rem;
            background: #ecf0f1;
            border-left: 3px solid #3498db;
        }

        .example-sentence {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 0;
            border-left: 4px solid #3498db;
            margin-top: 1rem;
            border: 1px solid #e9ecef;
        }

        .btn {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 12px 30px;
            border-radius: 0;
            text-decoration: none;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(52, 152, 219, 0.3);
            border: 1px solid #2980b9;
        }

        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(52, 152, 219, 0.4);
        }

        .btn-secondary {
            background: #95a5a6;
            border-color: #7f8c8d;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .random-btn {
            display: block;
            width: 200px;
            text-align: center;
            margin: 2rem auto;
        }

        .empty-state {
            text-align: center;
            padding: 3rem;
            color: #7f8c8d;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
        }

        .empty-state h2 {
            margin-bottom: 1rem;
            color: #2c3e50;
        }

        h1 {
            text-align: center;
            margin-bottom: 2rem;
            color: #2c3e50;
            font-size: 2.2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #3498db;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }

        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-left: 4px solid #f39c12;
            padding: 1.5rem;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ä–º */
        .auth-form {
            max-width: 400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #bdc3c7;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }

        .form-errors {
            background: #e74c3c;
            color: white;
            padding: 1rem;
            margin-bottom: 1rem;
            border-left: 4px solid #c0392b;
        }

        .form-errors ul {
            margin: 0;
            padding-left: 1rem;
        }

        .auth-links {
            text-align: center;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #ecf0f1;
        }

        .auth-links a {
            color: #3498db;
            text-decoration: none;
        }

        .auth-links a:hover {
            text-decoration: underline;
        }

        .logout-form {
            display: inline;
        }

        @media (max-width: 768px) {
            .nav {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                gap: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }

            .user-info {
                flex-direction: column;
                text-align: center;
            }

            .word-original {
                font-size: 1.5rem;
            }

            .word-translation {
                font-size: 1.2rem;
            }

            .action-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 250px;
            }
        }

        /* –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
        .favorite-btn {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            color: #95a5a6;
            transition: color 0.3s ease;
            padding: 0.5rem;
            margin-left: 0.5rem;
        }

        .favorite-btn:hover {
            color: #e74c3c;
        }

        .favorite-btn.active {
            color: #e74c3c;
        }

        .favorite-btn.active:hover {
            color: #c0392b;
        }

        .filter-form {
            background: #f8f9fa;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 1px solid #e0e0e0;
        }

        .filter-row {
            display: flex;
            gap: 1rem;
            align-items: flex-end;
            flex-wrap: wrap;
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        .filter-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .filter-group select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #bdc3c7;
            font-size: 1rem;
            background: white;
        }

        .filter-actions {
            display: flex;
            gap: 0.5rem;
        }

        .filter-actions .btn {
            padding: 0.75rem 1.5rem;
        }

        .no-words {
            text-align: center;
            padding: 3rem;
            color: #7f8c8d;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
        }

        @media (max-width: 768px) {
            .filter-row {
                flex-direction: column;
            }

            .filter-group {
                width: 100%;
            }

            .filter-actions {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <nav class="nav">
                <a href="{% url 'vocabulary:word_list' %}" class="logo">LanguageLearn</a>
                <div class="nav-links">
                    <a href="{% url 'vocabulary:word_list' %}">–í—Å–µ —Å–ª–æ–≤–∞</a>
                    <a href="{% url 'vocabulary:random_word' %}">–°–ª—É—á–∞–π–Ω–æ–µ —Å–ª–æ–≤–æ</a>

                    <a>–î–æ–±–∞–≤–∏—Ç—å —è–∑—ã–∫</a>

                    {% if user.is_authenticated %}
                        <a href="{% url 'vocabulary:favorite_words' %}">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</a>
                        <div class="user-info">
                            <span class="user-welcome">–ü—Ä–∏–≤–µ—Ç, {{ user.username }}!</span>
                            <form method="post" action="{% url 'vocabulary:logout' %}" class="logout-form">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-secondary">–í—ã–π—Ç–∏</button>
                            </form>
                        </div>
                    {% else %}
                        <div class="user-info">
                            <a href="{% url 'vocabulary:login' %}">–í–æ–π—Ç–∏</a>
                            <a href="{% url 'vocabulary:register' %}" class="btn">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                        </div>
                    {% endif %}
                </div>
            </nav>
        </header>

        <main class="main-content">
            {% block content %}
            {% endblock %}
        </main>
    </div>

    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
        function toggleFavorite(wordId) {
            if (!{% if user.is_authenticated %}true{% else %}false{% endif %}) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É —á—Ç–æ–±—ã –¥–æ–±–∞–≤–ª—è—Ç—å —Å–ª–æ–≤–∞ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ');
                return;
            }

            const button = document.querySelector(`.favorite-btn[data-word-id="${wordId}"]`);
            const url = `/word/${wordId}/toggle-favorite/`;

            fetch(url, {
                method: 'POST',
                headers: {
                    'X-CSRFToken': getCookie('csrftoken'),
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    button.classList.toggle('active', data.is_favorite);
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–∫–æ–Ω–∫—É
                    button.innerHTML = data.is_favorite ? '‚ù§Ô∏è' : 'ü§ç';

                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                    const message = data.is_favorite ?
                        '–°–ª–æ–≤–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ!' :
                        '–°–ª–æ–≤–æ —É–¥–∞–ª–µ–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ';
                    showNotification(message);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
            });
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è CSRF —Ç–æ–∫–µ–Ω–∞
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(message) {
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #2ecc71;
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 0;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;

            // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);

            notification.textContent = message;
            document.body.appendChild(notification);

            // –£–¥–∞–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease forwards';

                const slideOutStyle = document.createElement('style');
                slideOutStyle.textContent = `
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(slideOutStyle);

                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞ –≤—Å–µ –∫–Ω–æ–ø–∫–∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
            const favoriteButtons = document.querySelectorAll('.favorite-btn');
            favoriteButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const wordId = this.getAttribute('data-word-id');
                    toggleFavorite(wordId);
                });
            });
        });
    </script>
</body>
</html>